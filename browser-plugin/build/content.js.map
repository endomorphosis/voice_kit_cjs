{"version":3,"file":"content.js","mappings":"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","sources":["webpack://browser-extension/./src/content.js"],"sourcesContent":["// content.js - the content script which runs in the context of web pages, and has access\r\n// to the DOM and other web APIs.\r\n\r\n// Wait for document to be fully loaded\r\nif (document.readyState === 'loading') {\r\n  document.addEventListener('DOMContentLoaded', initializeContent);\r\n} else {\r\n  initializeContent();\r\n}\r\n\r\nfunction initializeContent() {\r\n  // Check for WebGPU support\r\n  console.log('Checking WebGPU support...');\r\n  if (!navigator.gpu) {\r\n    console.log('WebGPU not supported, will use WASM backend');\r\n  } else {\r\n    // Test WebGPU capabilities without requiring f16\r\n    navigator.gpu.requestAdapter().then(adapter => {\r\n      if (adapter) {\r\n        console.log('WebGPU supported with adapter:', {\r\n          name: adapter.name,\r\n          features: Array.from(adapter.features)\r\n        });\r\n      } else {\r\n        console.log('WebGPU adapter not available, will use WASM backend');\r\n      }\r\n    }).catch(error => {\r\n      console.log('WebGPU initialization failed:', error);\r\n    });\r\n  }\r\n\r\n  // Handles UI interactions and DOM manipulation\r\n  chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {\r\n    if (message.action === 'showLoading') {\r\n      const div = document.createElement('div');\r\n      div.id = 'extension-loading';\r\n      div.textContent = 'Fetching content...';\r\n      Object.assign(div.style, {\r\n        position: 'fixed',\r\n        top: '20px',\r\n        right: '20px',\r\n        padding: '10px',\r\n        background: 'white',\r\n        border: '1px solid #ccc',\r\n        borderRadius: '4px',\r\n        zIndex: '10000'\r\n      });\r\n      document.body.appendChild(div);\r\n    }\r\n    \r\n    if (message.action === 'hideLoading') {\r\n      document.getElementById('extension-loading')?.remove();\r\n    }\r\n\r\n    if (message.action === 'showResult') {\r\n      const { result, userText } = message;\r\n      const chatContainer = document.createElement('div');\r\n      chatContainer.id = 'copilot-chat-container';\r\n      Object.assign(chatContainer.style, {\r\n        position: 'fixed',\r\n        top: '20px',\r\n        right: '20px',\r\n        width: '400px',\r\n        maxHeight: '80vh',\r\n        background: 'white',\r\n        border: '1px solid #ccc',\r\n        borderRadius: '8px',\r\n        boxShadow: '0 2px 10px rgba(0,0,0,0.1)',\r\n        zIndex: '10000',\r\n        display: 'flex',\r\n        flexDirection: 'column'\r\n      });\r\n\r\n      const header = document.createElement('div');\r\n      Object.assign(header.style, {\r\n        padding: '12px',\r\n        borderBottom: '1px solid #eee',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center'\r\n      });\r\n      header.innerHTML = '<span style=\"font-weight: bold;\">AI Response</span>';\r\n\r\n      const closeBtn = document.createElement('button');\r\n      closeBtn.textContent = 'Ã—';\r\n      Object.assign(closeBtn.style, {\r\n        border: 'none',\r\n        background: 'none',\r\n        cursor: 'pointer',\r\n        fontSize: '20px',\r\n        padding: '0 4px'\r\n      });\r\n      closeBtn.onclick = () => chatContainer.remove();\r\n      header.appendChild(closeBtn);\r\n\r\n      const content = document.createElement('div');\r\n      Object.assign(content.style, {\r\n        padding: '16px',\r\n        overflowY: 'auto',\r\n        fontSize: '14px',\r\n        lineHeight: '1.5'\r\n      });\r\n\r\n      const userMessage = document.createElement('div');\r\n      Object.assign(userMessage.style, {\r\n        marginBottom: '12px',\r\n        padding: '8px 12px',\r\n        background: '#f0f0f0',\r\n        borderRadius: '8px'\r\n      });\r\n      userMessage.textContent = userText;\r\n\r\n      const aiResponse = document.createElement('div');\r\n      Object.assign(aiResponse.style, {\r\n        padding: '8px 12px',\r\n        background: '#e3f2fd',\r\n        borderRadius: '8px',\r\n        whiteSpace: 'pre-wrap'\r\n      });\r\n      aiResponse.textContent = result;\r\n\r\n      content.appendChild(userMessage);\r\n      content.appendChild(aiResponse);\r\n      chatContainer.appendChild(header);\r\n      chatContainer.appendChild(content);\r\n      document.body.appendChild(chatContainer);\r\n    }\r\n\r\n    if (message.action === 'showError') {\r\n      alert('Error: ' + message.error);\r\n    }\r\n  });\r\n}\r\n\r\nfunction handleTranscription(text) {\r\n  // Only modify the page if we have access to the document\r\n  if (document && document.body) {\r\n    // Handle the transcription result\r\n    console.log('Received transcription:', text);\r\n  }\r\n}\r\n\r\n// Send audio data to background script\r\nfunction sendAudioData(audioData) {\r\n  chrome.runtime.sendMessage({\r\n    type: 'transcribe',\r\n    audio: audioData\r\n  });\r\n}\r\n\r\n// Example usage for text generation:\r\n//\r\n// import { ACTION_NAME } from \"./constants.js\";\r\n// const message = {\r\n//     action: ACTION_NAME,\r\n//     text: 'Your input text here',\r\n// }\r\n// const response = await chrome.runtime.sendMessage(message);\r\n// console.log('Generated text:', response)\r\n\r\n// You can also add your own UI elements or handlers here to trigger text generation\r\n// The context menu integration is handled by background.js\r\n"],"names":["document","readyState","addEventListener","initializeContent","console","log","navigator","gpu","requestAdapter","then","adapter","name","features","Array","from","catch","error","chrome","runtime","onMessage","addListener","message","sender","sendResponse","action","div","createElement","id","textContent","Object","assign","style","position","top","right","padding","background","border","borderRadius","zIndex","body","appendChild","getElementById","remove","result","userText","chatContainer","width","maxHeight","boxShadow","display","flexDirection","header","borderBottom","justifyContent","alignItems","innerHTML","closeBtn","cursor","fontSize","onclick","content","overflowY","lineHeight","userMessage","marginBottom","aiResponse","whiteSpace","alert","handleTranscription","text","sendAudioData","audioData","sendMessage","type","audio"],"sourceRoot":""}