(()=>{"use strict";(()=>{const e={isInitialized:!1,elements:new Map},t={ready:()=>new Promise((e=>{"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)})),safeCreateElement:(e,r={})=>{try{const n=document.createElement(e);return r.id&&(n.id=r.id),r.className&&(n.className=r.className),r.text&&(n.textContent=t.sanitize(r.text)),r.styles&&Object.assign(n.style,r.styles),n}catch(e){return console.error("Failed to create element:",e),null}},sanitize:e=>e?String(e).replace(/[<>&"']/g,(e=>({"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"}[e]||e))):""};class r{static send(e){return e&&"object"==typeof e?chrome.runtime.sendMessage(e):Promise.reject(new Error("Invalid message format"))}static listen(){chrome.runtime.onMessage.addListener(((e,t,r)=>e?.action?(this.handleMessage(e,t).then((e=>r(e))).catch((e=>r({error:e.message}))),!0):(r({error:"Invalid message format"}),!0)))}static async handleMessage(e,t){switch(e.action){case"showResult":if(!e.result)throw new Error("No result provided");return n.showResult(e.result,e.userText),{success:!0};case"showError":return n.showError(e.error),{success:!0};default:throw new Error(`Unknown action: ${e.action}`)}}}const n={containers:new Map,createContainer(e,r={}){try{let n=this.containers.get(e);if(n?.isConnected)return n;if(n=t.safeCreateElement("div",{id:e,styles:{position:"fixed",zIndex:"10000",padding:"15px",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",fontFamily:"system-ui, -apple-system, sans-serif",...r.styles}}),!n)throw new Error("Failed to create container");return document.body.appendChild(n),this.containers.set(e,n),n}catch(e){return console.error("Error creating container:",e),null}},showResult(e,r){const n=this.createContainer("extension-result",{styles:{bottom:"20px",right:"20px",maxWidth:"400px",background:"white"}});if(!n)return;const s=t.safeCreateElement("div");if(!s)return;s.innerHTML=`\n        <div style="margin-bottom: 10px; color: #666;">${t.sanitize(r||"")}</div>\n        <div style="margin-bottom: 15px;">${t.sanitize(e)}</div>\n      `;const o=t.safeCreateElement("button",{text:"Close",styles:{padding:"5px 10px",border:"none",background:"#f0f0f0",borderRadius:"4px",cursor:"pointer"}});o&&(o.onclick=()=>n.remove(),s.appendChild(o)),n.innerHTML="",n.appendChild(s)},showError(e){const r=this.createContainer("extension-error",{styles:{top:"20px",right:"20px",background:"#ffebee",border:"1px solid #ffcdd2"}});r&&(r.textContent=t.sanitize(e||"Unknown error occurred"),setTimeout((()=>r.remove()),5e3))}};!async function(){if(!e.isInitialized)try{await t.ready(),r.listen(),e.isInitialized=!0}catch(e){console.error("Failed to initialize content script:",e)}}()})();const e="transformers-js-result-container";function t(t,r){let n=document.getElementById(e);n||(n=function(){const t=document.createElement("div");return t.id=e,t.style.cssText="\n    position: fixed;\n    bottom: 20px;\n    right: 20px;\n    max-width: 400px;\n    padding: 15px;\n    background: white;\n    border-radius: 8px;\n    box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n    z-index: 10000;\n    font-family: system-ui, -apple-system, sans-serif;\n  ",t}(),document.body.appendChild(n)),n.innerHTML=`\n    <div style="margin-bottom: 10px; color: #666;">Input: ${r}</div>\n    <div style="margin-bottom: 15px;">${t}</div>\n    <button onclick="this.parentElement.remove()" style="\n      padding: 5px 10px;\n      border: none;\n      background: #f0f0f0;\n      border-radius: 4px;\n      cursor: pointer;\n    ">Close</button>\n  `}chrome.runtime.onMessage.addListener(((e,r,n)=>{if(e&&e.action)try{switch(e.action){case"showResult":e.result&&e.userText&&t(e.result,e.userText);break;case"showError":console.error("Error from extension:",e.error),t(`Error: ${e.error}`,"Failed operation")}}catch(e){console.error("Error handling message:",e)}}))})();